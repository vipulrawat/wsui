(this.webpackJsonpstocks=this.webpackJsonpstocks||[]).push([[0],{11:function(e,t,a){e.exports=a(29)},18:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var r,n=a(3),c=a(5),s=a(0),l=a.n(s);!function(e){e.UP="UP",e.DOWN="DOWN",e.NEUTRAL="NEUTRAL"}(r||(r={}));var o={hasOpened:!1,hasError:!1,data:{}},u=Object(s.createContext)({state:o,dispatch:function(){}}),d=function(e,t){switch(t.type){case"DATA":var a=t.payload,s=e.data,l=s;return a.forEach((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];s.hasOwnProperty(a)?(l[a].price>Number(n)?l[a].status=r.DOWN:l[a].status=r.UP,l[a].price=Number(n),l[a].updatedAt=new Date):l[a]={price:Number(n),status:r.NEUTRAL,updatedAt:new Date}})),Object(n.a)({},e,{data:Object(n.a)({},s,{},l)});case"ERROR":return Object(n.a)({},e,{hasError:!0});case"TOGGLE_CONN_STATUS":var o=e.hasOpened;return Object(n.a)({},e,{hasOpened:!o});default:return e}},i=function(e){var t=Object(s.useReducer)(d,o),a=Object(c.a)(t,2),r=a[0],n=a[1];return l.a.createElement(u.Provider,Object.assign({value:{state:r,dispatch:n}},e))};function m(){var e=Object(s.useContext)(u);if(void 0===e)throw new Error("useStocks must be used within a StocksProvider");return e}var p=a(35),b=a(10),f=a.n(b),g=a(8),E=a.n(g),x=function(){return l.a.createElement("div",{className:"p-5"},l.a.createElement("p",{className:"flex flex-col justify-center items-center text-red-700 text-sm font-bold"},"Something Went Wrong!",l.a.createElement("span",{className:"text-red-500 text-xs font-light"},"If you are on chrome, Allow 'Insecure Content' in site settings which can be found by clicking the lock icon in address bar.")))},y=function(e){var t=e.status;return l.a.createElement(s.Fragment,null,l.a.createElement("span",{className:"text-black text-sm font-semibold"},"Connection Status:"),l.a.createElement("span",{className:"inline-flex items-center px-4 py-2 rounded text-xs font-medium leading-4 ".concat(t?"bg-green-200 text-green-800":"bg-red-200 text-green-800")},t?"Connected":"Disconnected"))},h=a(36),N=function(e){var t=e.children,a=e.data,r=e.statusBg,n=e.statusText;return l.a.createElement("td",{className:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 border px-8 py-2 text-sm text-center ".concat(r," ").concat(n)},t||a)},O=function(e){var t=e.name,a=e.price,n=e.status,c=e.updatedAt,s="",o="";return n===r.UP?(s="bg-green-400",o="text-green-700"):n===r.DOWN&&(s="bg-red-400",o="text-red-700"),l.a.createElement("tr",{key:t},l.a.createElement(N,{data:t}),l.a.createElement(N,{data:a,statusText:o}),l.a.createElement(N,{data:n,statusBg:s}),l.a.createElement(N,null,l.a.createElement(h.a,{date:c})))},w=function(){var e=m().state,t=Object(s.useMemo)((function(){return e.data}),[e]);return Object.keys(t).length?l.a.createElement("div",{className:"align-middle inline-block min-w-full shadow overflow-hidden sm:rounded-lg border-b border-gray-200"},l.a.createElement("div",{className:"p-2 flex justify-between items-center"},l.a.createElement(y,{status:e.hasOpened})),l.a.createElement("table",{className:"shadow-lg bg-white min-w-full"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-700 uppercase tracking-wider"},"Name"),l.a.createElement("th",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-700 uppercase tracking-wider"},"Value"),l.a.createElement("th",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-700 uppercase tracking-wider"},"History"),l.a.createElement("th",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-700 uppercase tracking-wider"},"Updated At"))),l.a.createElement("tbody",{className:"bg-white"},Object.keys(t).map((function(e,a){var r=t[e],n=r.price,c=r.status,s=r.updatedAt;return l.a.createElement(O,{key:a,name:e,price:n,status:c,updatedAt:s})}))))):l.a.createElement("div",{className:"text-indigo-500"},"Loading...")},v=(a(18),function(){var e=m(),t=e.state,a=e.dispatch,r=Object(s.useRef)(new WebSocket("ws://stocks.mnet.website"));return Object(s.useEffect)((function(){r.current.onopen=function(){a({type:"TOGGLE_CONN_STATUS"})},r.current.onclose=function(){a({type:"TOGGLE_CONN_STATUS"})},r.current.onerror=function(e){console.log(e),a({type:"ERROR"})},r.current.onmessage=function(e){a({type:"DATA",payload:JSON.parse(e.data)})}})),Object(s.useEffect)((function(){return function(){return r.current.close()}}),[r]),l.a.createElement("div",{className:"w-full h-screen bg-gray-100 flex overflow:hidden"},l.a.createElement("div",{className:"m-auto"},t.hasError?l.a.createElement(x,null):l.a.createElement(w,null)))});p.a.addLocale(f.a),E.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(i,null,l.a.createElement(v,null))),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.736c94f0.chunk.js.map